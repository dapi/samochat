<script 
  defer 
  src="<%= (defined?(use_asset_digest) && use_asset_digest) ? asset_url('button-widget.js') : remove_asset_digest(asset_url('button-widget.js')) %>" 
  data-<%= widget_namespace %>-pk="<%= project_key %>"<%- if defined? size -%>
  data-size="<%= size %>"<%- end -%><%- if defined? user -%>
  data-user="<%= CGI::escape user.to_json %>"<%- end-%><%- if defined? page -%>
  data-page="<%= CGI::escape page.to_json %>"<%- end-%><%- if defined? visit -%>
  data-visit="<%= CGI::escape visit.to_json %>"<%- end-%>>
</script>
